{% extends '!layout.html' %}
{% block body %}
{% endblock %}

{#
    {% block header %}
    {% include 'header.html' %}
    {% endblock %}

    {% block basicstrapheader %}
    {% endblock %}
#}
{% block content %}
    <div id="header-container">
    </div>
    <div class="hero flex flex-flow-rowwrap">
        <div class="hero-intro">
            <h1 style="font-weight: bold">Informatics Playbook</h1>
            <p class="hero-text">A collaborative, living playbook for health informatics best practices. Each chapter is created by the community and continuously updated as the best practices evolve. It is a space for the community to <b><u>read</u></b> the existing best-practices playbook, <b><u>create</u></b> a new chapter or <b><u>contribute</u></b> to existing chapters.</p>
            <div class="flex flex-flow-rowwrap">
                <div class="flex hero-box">
                    <div class="flex" style="justify-content: center; margin-bottom: 20px;">
                        <i class="fas fa-book-reader" style="font-size: 30px; color: #00bcd4; margin-right: 15px;"></i>
                        <div class="flex" style="justify-content: center; align-items: center; font-size: 18px; font-weight: bold;">
                            <p style="margin: 0px;">Read</p></div>
                    </div>
                    <div class="flex" style="flex-direction: column;">
                        {% set initialUrl="" %}
                        {% set theTocTree = toctree()
                        | replace("</a>", "")
                        | replace(" href=\"", "></a>")
                        | replace("</li>", "</li>;")
                        | striptags
                        | replace("\">", "%")
                        | replace("Contents:", "") %}
                        {% set theTocTree = theTocTree.split(";") %}

                        {% for element in theTocTree %}
                        {% set el = element.split("%") %}
                        {% set url = el[0] | trim | safe %}
                        {% set entry = el[1] | trim | safe %}
                            {% if loop.index==1 %}
                                {% set initialUrl=url %}
                                <a href="{{ initialUrl }}">Browse all chapters</a>
                            {% endif %}
                        {% endfor %}
                        {% set initialUrl="" %}
                        {% set theTocTree = toctree()
                        | replace("</a>", "")
                        | replace(" href=\"", "></a>")
                        | replace("</li>", "</li>;")
                        | striptags
                        | replace("\">", "%")
                        | replace("Contents:", "") %}
                        {% set theTocTree = theTocTree.split(";") %}

                        {% for element in theTocTree %}
                        {% set el = element.split("%") %}
                        {% set url = el[0] | trim | safe %}
                        {% set entry = el[1] | trim | safe %}
                            {% if loop.index==1 %}
                                {% set initialUrl=url %}
                                <a href="{{ initialUrl }}">Read from the Chapter 1</a>
                            {% endif %}
                        {% endfor %}
                        <a href="{{ pathto('search') }}">Search for contents</a>
                    </div>
                </div>
                <div class="flex hero-box">
                    <div class="flex" style="justify-content: center; margin-bottom: 20px;">
                        <i class="fas fa-edit" style="font-size: 30px; color: #2196f3; margin-right: 15px;"></i>
                        <div class="flex" style="justify-content: center; align-items: center; font-size: 18px; font-weight: bold;">
                            <p style="margin: 0px;">Read</p></div>
                    </div>
                    <div class="flex" style="flex-direction: column;">
                        {% set initialUrl="" %}
                        {% set theTocTree = toctree()
                        | replace("</a>", "")
                        | replace(" href=\"", "></a>")
                        | replace("</li>", "</li>;")
                        | striptags
                        | replace("\">", "%")
                        | replace("Contents:", "") %}
                        {% set theTocTree = theTocTree.split(";") %}

                        {% for element in theTocTree %}
                        {% set el = element.split("%") %}
                        {% set url = el[0] | trim | safe %}
                        {% set entry = el[1] | trim | safe %}
                            {% if loop.index==1 %}
                                {% set initialUrl=url %}
                                <a href="{{ initialUrl }}">Create a new chapter</a>
                            {% endif %}
                        {% endfor %}
                        {% set initialUrl="" %}
                        {% set theTocTree = toctree()
                        | replace("</a>", "")
                        | replace(" href=\"", "></a>")
                        | replace("</li>", "</li>;")
                        | striptags
                        | replace("\">", "%")
                        | replace("Contents:", "") %}
                        {% set theTocTree = theTocTree.split(";") %}

                        {% for element in theTocTree %}
                        {% set el = element.split("%") %}
                        {% set url = el[0] | trim | safe %}
                        {% set entry = el[1] | trim | safe %}
                            {% if loop.index==1 %}
                                {% set initialUrl=url %}
                                <a href="{{ initialUrl }}">Contribute to chapters</a>
                            {% endif %}
                        {% endfor %}
                        <a href="{{ pathto('search') }}">Raise an issue on contents</a>
                    </div>
                </div>
                <div class="flex" style="margin-top: 20px; justify-content: center; align-items: center;">
                    <i class="fab fa-github" style="font-size: 30px; color: #171717; margin-right: 15px;"></i>
                    <a style="color: #171717 !important; text-decoration: underline;">Access the Github repository directly</a>
                </div>

<!--                <a class="hero-button" href="https://github.com/newgene/reusable-data-best-practices/">Contribute</a>-->
<!--                <a class="hero-button" href="{{ pathto('search') }}">Search</a>-->
            </div>
        </div>
        <img src="{{ pathto('_static/svg/collaboration.svg', 1) }}" class="collaboration"/>
    </div>
    <div class="flex chapters-container featured-container">
        <h1 style="font-weight: bold; color: white; margin-top: 0;">Featured</h1>
        <div class="flex flex-flow-rowwrap intro-chapters">
            {% set initialUrl="" %}
            {% set theTocTree = toctree()
            | replace("</a>", "")
            | replace(" href=\"", "></a>")
            | replace("</li>", "</li>;")
            | striptags
            | replace("\">", "%")
            | replace("Contents:", "") %}
            {% set theTocTree = theTocTree.split(";") %}

            {% for element in theTocTree %}
            {% set el = element.split("%") %}
            {% set url = el[0] | trim | safe %}
            {% set entry = el[1] | trim | safe %}
                {% if (loop.index==1 or loop.index==2 or loop.index==3) %}
                    <a href="{{ url }}" style="text-decoration: none !important;">
                        <div class="chapter-box" style="background-color: #212121 !important; color: white;">
                            <p style="font-weight: bold">{{ entry }}</p>
                            {% for document_preview in document_previews %}
                                {% if document_preview.document_url == url %}
                                    <p class="chapter-box-preview">{{ document_preview.preview[0:100] }}...</p>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </a>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    <div class="flex chapters-container" style="margin-top: 20px;">
        <h1 class="chapter-header">Chapters</h1>
        <div id="dynamic-chapter-search-container"></div>
        <div class="flex flex-flow-rowwrap intro-chapters">
            {% set initialUrl="" %}
            {% set theTocTree = toctree()
            | replace("</a>", "")
            | replace(" href=\"", "></a>")
            | replace("</li>", "</li>;")
            | striptags
            | replace("\">", "%")
            | replace("Contents:", "") %}
            {% set theTocTree = theTocTree.split(";") %}

            {% for element in theTocTree %}
            {% set el = element.split("%") %}
            {% set url = el[0] | trim | safe %}
            {% set entry = el[1] | trim | safe %}
                {% if url %}
                    <a id="{{ url }}" href="{{ url }}" class="chapter-box-container" style="text-decoration: none !important;">
                        <div class="chapter-box" >
                            <p style="font-weight: bold">{{ entry }}</p>
                            {% for document_preview in document_previews %}
                                {% if document_preview.document_url == url %}
                                    <p class="chapter-box-preview">{{ document_preview.preview[0:100] }}...</p>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </a>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    {% block relbar %}
    {% endblock %}
{% endblock %}

{% block navsidebar %}
{% endblock %}

{% block sidebartitle %}
{% endblock %}

{% block navigation %}
{% endblock %}

{% block footer %}
    {# super() renders the arrow at the bottom right of the page #}
    {{ super() }}
    <div id="footer-container">
    </div>
{% endblock %}